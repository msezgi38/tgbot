;=============================================================================
; Asterisk Manager Interface (AMI) Configuration
;=============================================================================
; This file configures AMI access for the Python dialer to originate calls
;=============================================================================

[general]
enabled = yes
port = 5038
bindaddr = 127.0.0.1               ; Only allow local connections for security
displayconnects = yes              ; Log connection attempts
timestampevents = yes              ; Add timestamps to events

;-----------------------------------------------------------------------------
; AMI User for Python Bot
;-----------------------------------------------------------------------------
[ivr_bot]
secret = IVRBot@Secure2026!        ; ⚠️ CHANGE THIS PASSWORD IN PRODUCTION
deny = 0.0.0.0/0.0.0.0             ; Deny all by default
permit = 127.0.0.1/255.255.255.255 ; Only allow localhost
read = system,call,cdr,agent,user,config,dtmf,reporting,dialplan
write = system,call,originate,command
writetimeout = 5000                ; 5 second write timeout

;-----------------------------------------------------------------------------
; Permission Breakdown:
;-----------------------------------------------------------------------------
; READ permissions:
;   - system: System events and status
;   - call: Call events (Answer, Hangup, DTMF)
;   - cdr: Call Detail Records for billing
;   - dtmf: DTMF digit detection events
;   - reporting: Queue and agent reporting
;   - dialplan: Dialplan execution status
;
; WRITE permissions:
;   - originate: Ability to place outbound calls (CRITICAL for bot)
;   - call: Manipulate active calls
;   - command: Execute Asterisk CLI commands
;
;-----------------------------------------------------------------------------
; Security Notes:
;-----------------------------------------------------------------------------
; 1. Change the 'secret' password before deploying to production
; 2. AMI only accepts connections from localhost (127.0.0.1)
; 3. Use firewall rules to ensure port 5038 is not exposed externally
; 4. Consider using AMI over TLS in production (tlsenable=yes)
;-----------------------------------------------------------------------------
; Testing AMI Connection:
;-----------------------------------------------------------------------------
; telnet localhost 5038
;   Action: Login
;   Username: ivr_bot
;   Secret: IVRBot@Secure2026!
;
; Expected response: "Response: Success"
;=============================================================================
